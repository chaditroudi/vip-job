<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VipJob.tn - Votre Profil Professionnel</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Alpine.js pour les interactions -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            blue: {
              50: '#EFF6FF',
              100: '#DBEAFE',
              200: '#BFDBFE',
              300: '#93C5FD',
              400: '#60A5FA',
              500: '#3B82F6',
              600: '#2563EB',
              700: '#1D4ED8',
              800: '#1E40AF',
              900: '#1E3A8A',
              950: '#172554',
            },
            primary: '#1A1F2C',
            secondary: '#F1F0FB',
            accent: '#2563EB',
            border: '#e2e8f0',
            muted: {
              DEFAULT: '#F1F0FB',
              foreground: '#64748b'
            }
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-out',
            'slide-up': 'slideUp 0.5s ease-out',
            'pulse-slow': 'pulseSlow 3s ease-in-out infinite',
            'float': 'float 6s ease-in-out infinite'
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            pulseSlow: {
              '0%, 100%': { opacity: '1' },
              '50%': { opacity: '0.8' }
            },
            float: {
              '0%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-20px)' },
              '100%': { transform: 'translateY(0px)' }
            }
          },
          transitionDuration: {
            '2000': '2000ms',
          }
        }
      }
    }
  </script>
  
  <style>
    /* Utilitaires personnalisés */
    .glass-card {
      @apply backdrop-blur-lg bg-white/60 shadow-md border border-white/20 transition-all duration-300;
    }
    
    .glass-card-hover {
      @apply hover:shadow-lg hover:bg-white/80 transition-all duration-300;
    }
    
    .hover-lift {
      @apply transition-transform duration-300 hover:-translate-y-1;
    }
    
    .hover-glow {
      @apply transition-all duration-300 hover:shadow-[0_0_15px_rgba(37,99,235,0.5)];
    }
    
    .page-transition {
      @apply animate-fade-in;
    }
    
    .btn-gradient {
      @apply bg-gradient-to-r from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 text-white transition-all duration-300;
    }
    
    .text-gradient {
      @apply bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent;
    }
    
    .animation-delay-500 {
      animation-delay: 500ms;
    }
    
    .animation-delay-1000 {
      animation-delay: 1000ms;
    }
    
    .animation-delay-2000 {
      animation-delay: 2000ms;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-b from-blue-50 to-white">
  <!-- Éléments d'arrière-plan -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="animate-pulse-slow absolute top-20 -left-32 w-96 h-96 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20"></div>
    <div class="animate-pulse-slow animation-delay-2000 absolute bottom-20 -right-32 w-96 h-96 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30"></div>
  </div>
  
  <!-- Navigation Bar -->
  <header
    x-data="{ scrolled: false, mobileMenuOpen: false }"
    x-init="window.addEventListener('scroll', () => { scrolled = window.scrollY > 10 })"
    :class="scrolled ? 'glass-card py-2' : 'bg-transparent py-4'"
    class="fixed top-0 left-0 w-full z-50 transition-all duration-300"
  >
    <div class="container mx-auto flex justify-between items-center px-4">
      <a href="/" class="flex items-center gap-2 text-xl font-medium animate-fade-in"
        @click="mobileMenuOpen = false">
<div class="flex items-center space-x-2">
<img src="assets/img/logo1.png" alt="Logo" class="h-12 w-12 object-cover align-middle">
  <span class="text-2xl tracking-tight">VipJob<span class="text-accent">.tn</span></span>
</div> 

      <!-- Desktop Menu -->
      <nav class="hidden md:flex items-center gap-8 animate-fade-in">
        <a href="/offre" class="flex items-center py-2 transition-all duration-300 hover-lift text-primary/70 hover:text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
          Offres de travail
        </a>
        <a href="/abonnement" class="flex items-center py-2 transition-all duration-300 hover-lift text-primary/70 hover:text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2" ry="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>
          Abonnement
        </a>
        <a href="/profile" class="flex items-center py-2 transition-all duration-300 hover-lift text-primary/70 hover:text-primary">
  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zM12 14c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
  </svg>
  Profile
</a>
        
        <!-- Notification Icon -->
        <button class="relative p-1 rounded-full hover:bg-secondary transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
          <span class="absolute top-0 right-0 h-2 w-2 rounded-full bg-red-500"></span>
        </button>
        
        <!-- Avatar / Profile Picture -->
        <div class="h-9 w-9 rounded-full overflow-hidden hover-lift">
          <img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158" alt="Photo de profil" class="h-full w-full object-cover" />
        </div>
      </nav>

      <!-- Mobile Menu Button -->
      <button
        class="md:hidden text-primary p-2 rounded-md"
        @click="mobileMenuOpen = !mobileMenuOpen"
        aria-label="Toggle menu"
      >
        <svg x-show="!mobileMenuOpen" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
        <svg x-show="mobileMenuOpen" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
      </button>
    </div>

    <!-- Mobile Menu -->
    <div
      x-show="mobileMenuOpen"
      x-transition:enter="transition-transform duration-300 ease-in-out"
      x-transition:enter-start="translate-x-full"
      x-transition:enter-end="translate-x-0"
      x-transition:leave="transition-transform duration-300 ease-in-out"
      x-transition:leave-start="translate-x-0"
      x-transition:leave-end="translate-x-full"
      class="fixed inset-0 z-40 glass-card flex flex-col pt-20 pb-6 px-6 md:hidden"
    >
      <nav class="flex flex-col gap-6 items-center">
        <a href="/jobs" @click="mobileMenuOpen = false" class="flex items-center py-2 transition-all duration-300 text-primary/70 hover:text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
          Offres de travail
        </a>
        <a href="/subscription" @click="mobileMenuOpen = false" class="flex items-center py-2 transition-all duration-300 text-primary/70 hover:text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2" ry="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>
          Abonnement
        </a>
        <a href="/profile" class="flex items-center py-2 transition-all duration-300 hover-lift text-primary/70 hover:text-primary">
  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zM12 14c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
  </svg>
  Profile
</a>

        
        <div class="flex items-center gap-4 mt-4">
          <!-- Mobile Notification Icon -->
          <button class="relative p-2 rounded-full hover:bg-secondary transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
            <span class="absolute top-1 right-1 h-2 w-2 rounded-full bg-red-500"></span>
          </button>
          
          <!-- Mobile Avatar / Profile Picture -->
          <div class="h-10 w-10 rounded-full overflow-hidden">
            <img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158" alt="Photo de profil" class="h-full w-full object-cover" />
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Main Content - Profile Form -->
  <main class="flex-grow pt-28 pb-16 px-6 relative z-10">
    <section class="py-12">
      <div class="container mx-auto max-w-4xl">
        <div class="mb-12 text-center animate-slide-up">
          <h1 class="text-3xl md:text-4xl font-bold mb-4 text-blue-600">Votre Profil Professionnel</h1>

          <p class="text-muted-foreground max-w-2xl mx-auto">
            Personnalisez votre profil pour recevoir des offres d'emploi adaptées à vos compétences et préférences directement par SMS.
          </p>
        </div>
        
        <div class="glass-card hover-glow rounded-xl p-8 md:p-10 animate-fade-in shadow-lg border border-blue-100">
          <div class="flex flex-col items-center text-center mb-6">
                    <img src="/assets/img/image.png" alt="Profile Picture" id="profile-img" class="rounded-full w-32 h-32 border-4 mb-4 transition-transform duration-300 hover:scale-105 ring ring-gray-300">
                    <input type="file" name="profile" id="upload_profile" hidden required onchange="updateProfilePicture()">
<label for="upload_profile" 
       class="px-5 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 cursor-pointer transition-colors duration-300">
    Changer la photo de profil
</label>
                </div>
          <form class="space-y-8" x-data="{ 
            skills: ['JavaScript', 'React', 'Node.js', 'HTML/CSS'],
            newSkill: '',
            addSkill(e) {
              e.preventDefault();
              if (this.newSkill && !this.skills.includes(this.newSkill)) {
                this.skills.push(this.newSkill);
                this.newSkill = '';
              }
            },
            removeSkill(skill) {
              this.skills = this.skills.filter(s => s !== skill);
            }
          }" method="POST" action="/profil{{utilisateur.id}}">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-3 animate-fade-in animation-delay-500">
                <label for="firstName" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                  Prénom
                </label>
                <input id="prenom" name="prenom" type="text" placeholder="Votre prénom" class="h-12 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="{{utilisateur.prenom}}" required>
              </div>
              
              <div class="space-y-3 animate-fade-in animation-delay-500">
                <label for="lastName" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                  Nom
                </label>
                <input id="nom" name="nom" type="text" placeholder="Votre nom" class="h-12 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"value="{{utilisateur.nom}}" required>
              </div>
              
              <div class="space-y-3 animate-fade-in animation-delay-1000">
                <label for="email" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 18.9c0 .6-.4 1.1-1 1.1H3c-.6 0-1-.5-1-1.1v-11c0-.6.4-1.1 1-1.1h4l1.7-1.7C9 4.8 9.5 4.7 10 4.7h4c.5 0 1 .1 1.3.4L17 6.8h4c.6 0 1 .5 1 1.1v11Z"/><circle cx="12" cy="13" r="3"/></svg>
                  Email
                </label>
                <input id="email" name="email" type="email" placeholder="votre.email@exemple.com" class="h-12 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"value="{{utilisateur.email}}" required>
              </div>
              
              <div class="space-y-3 animate-fade-in animation-delay-1000">
                <label for="phone" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                  Téléphone
                </label>
                <input id="telephone"  name="telephone"  type="text" placeholder="+216 XX XXX XXX" class="h-12 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"value="{{utilisateur.telephone}}" required>
              </div>
              
              <div class="space-y-3 md:col-span-2 animate-fade-in animation-delay-1000">
                <label for="title" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                  Domaine 
                </label>
                <input id="domaine" name="domaine"  type="text" placeholder="Ex: Développeur Web, Designer UX/UI" class="h-12 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"value="{{utilisateur.domaine}}" required>
              </div>
              
              <div class="space-y-3 animate-fade-in animation-delay-1000">
                <label for="experience" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                  Années d'expérience
                </label>
                <select id="experience" class="h-12 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <option value="" disabled selected>Sélectionnez</option>
                  <option value="entry">Débutant (0-1 an)</option>
                  <option value="junior">Junior (1-3 ans)</option>
                  <option value="mid">Intermédiaire (3-5 ans)</option>
                  <option value="senior">Sénior (5+ ans)</option>
                  <option value="expert">Expert (10+ ans)</option>
                </select>
              </div>
               
                <div class="space-y-3 animate-fade-in animation-delay-1000">
                <label for="diplome" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
                    <path d="M6 12v5c3 3 9 3 12 0v-5"/>
                  </svg>
                  Diplôme
                </label>
                <input 
                  id="diplome"
                  name="diplome" 
                  type="text" 
                  placeholder="Ex: Licence en Informatique" 
                  class="h-12 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
              </div>




              <div class="space-y-3 md:col-span-2 animate-fade-in animation-delay-1000">
                <label for="skills" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m16 18 2-2v-3"/><path d="m8 18-2-2v-3"/><path d="M12 18v-3"/><path d="M20 7h-3a2 2 0 0 1 0-4h3"/><path d="M4 7h3a2 2 0 0 0 0-4H4"/><path d="M12 7v4"/></svg>
                  Compétences
                </label>
                <div class="flex flex-wrap gap-2 mb-3">
                  <template x-for="skill in skills" :key="skill">
                    <div class="py-1.5 pl-3 pr-2 flex items-center gap-1 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md transition-colors">
                      <span x-text="skill"></span>
                      <button 
                        type="button" 
                        @click="removeSkill(skill)"
                        class="text-blue-600 hover:text-blue-800 rounded-full"
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                      </button>
                    </div>
                  </template>
                </div>
                <div class="flex gap-2">
                  <input 
                    x-model="newSkill"
                    placeholder="Ajouter une compétence"
                    class="h-12 flex-grow px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  >
                  <button 
                    type="button" 
                    @click="addSkill"
                    class="h-12 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors flex items-center gap-2"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="M8 12h8"/></svg>
                    Ajouter
                  </button>
                </div>
              </div>
             
              

              <!-- Nouveau champ Gouvernorat -->
              <div class="space-y-3 animate-fade-in animation-delay-1000">
                <label for="governorate" class="flex items-center text-sm font-medium">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
                    <circle cx="12" cy="10" r="3"/>
                  </svg>
                  Gouvernorat
                </label>
                <select 
                  id="gouvernorat" 
                  name="gouvernorat"
                  class="h-12 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                 value="{{utilisateur.gouvernorat}}" required >
                  <option value="" disabled selected>Sélectionnez votre gouvernorat</option>
                  <option value="tunis">Tunis</option>
                  <option value="ariana">Ariana</option>
                  <option value="ben_arous">Ben Arous</option>
                  <option value="mannouba">La Mannouba</option>
                  <option value="nabeul">Nabeul</option>
                  <option value="zaghouan">Zaghouan</option>
                  <option value="bizerte">Bizerte</option>
                  <option value="beja">Béja</option>
                  <option value="jendouba">Jendouba</option>
                  <option value="kef">Le Kef</option>
                  <option value="siliana">Siliana</option>
                  <option value="sousse">Sousse</option>
                  <option value="monastir">Monastir</option>
                  <option value="mahdia">Mahdia</option>
                  <option value="sfax">Sfax</option>
                  <option value="kairouan">Kairouan</option>
                  <option value="kasserine">Kasserine</option>
                  <option value="sidi_bouzid">Sidi Bouzid</option>
                  <option value="gabes">Gabès</option>
                  <option value="medenine">Médenine</option>
                  <option value="tataouine">Tataouine</option>
                  <option value="gafsa">Gafsa</option>
                  <option value="tozeur">Tozeur</option>
                  <option value="kebili">Kébili</option>
                </select>
              </div>
              <div class="space-y-3 md:col-span-2 animate-fade-in animation-delay-1000">
  <label for="bio" class="flex items-center text-sm font-medium">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
      <circle cx="12" cy="7" r="4"/>
    </svg>
    À propos de vous
  </label>
  <textarea 
    id="bio" 
    name="bio"
    placeholder="Parlez-nous de votre expérience, vos objectifs professionnels..." 
    class="min-h-[120px] w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
  ></textarea>
  <button 
  type="button" 
  id="improveBioBtn"
  class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
  @click="improveBio()"
>
    Envoyer
  </button>
</div>

       <div class="space-y-3 animate-fade-in animation-delay-1000">
  <label class="flex items-center text-sm font-medium">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="10"/>
      <path d="M2 12h20"/>
      <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
    </svg>
    Langues
  </label>
  <div class="space-y-2">
    <label class="flex items-center space-x-2">
      <input type="checkbox" name="languages" value="french" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
      <span>Français</span>
    </label>
    <label class="flex items-center space-x-2">
      <input type="checkbox" name="languages" value="english" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
      <span>Anglais</span>
    </label>
    <label class="flex items-center space-x-2">
      <input type="checkbox" name="languages" value="german" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
      <span>Allemand</span>
    </label>
    <label class="flex items-center space-x-2">
      <input type="checkbox" name="languages" value="spanish" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
      <span>Espagnol</span>
    </label>
    <label class="flex items-center space-x-2">
      <input type="checkbox" name="languages" value="arabic" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
      <span>Arabe</span>
    </label>
  </div>
</div>
       
              
              
              <div class="space-y-3 md:col-span-2 animate-fade-in animation-delay-1000">
                <div class="flex items-center space-x-2 group">
                  <input type="checkbox" id="notifications" checked class="rounded border-blue-400 text-blue-600 focus:ring-blue-500">
                  <label for="notifications" class="text-sm font-medium group-hover:text-blue-700 transition-colors">
                    Recevoir des alertes d'emploi par SMS
                  </label>
                </div>
              </div>
            </div>
            
            <div class="pt-6 animate-fade-in animation-delay-2000 flex flex-col md:flex-row justify-between gap-4 w-full">
  <!-- Bouton gauche -->
  <button 
    type="button"
    class="h-12 px-8 bg-blue-500 hover:bg-blue-600 text-white rounded-md w-full md:w-auto flex items-center justify-center gap-2 group shadow-md transition-colors order-1 md:order-none" onclick="generateCV()" >
    Créer CV
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 transform group-hover:-translate-y-0.5 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/>
    </svg>
  </button>

  <!-- Bouton droit -->
  <button 
    type="submit" 
    class="h-12 px-8 btn-gradient rounded-md w-full md:w-auto flex items-center justify-center gap-2 group shadow-md order-2 md:order-none">
    Enregistrer le profil
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
    </svg>
  </button>
</div>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>
<script>
        function updateProfilePicture() {
  const fileInput = document.getElementById('upload_profile');
  const profileImg = document.getElementById('profile-img'); // Image principale
  const profileBtnImg = document.getElementById('profile-btn-img'); // Image dans le bouton

  const file = fileInput.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      profileImg.src = e.target.result; // Met à jour l’image principale
      profileBtnImg.src = e.target.result; // Met à jour l’image du bouton
    };
    reader.readAsDataURL(file);
  }
}
      document.addEventListener("DOMContentLoaded", function () {
    const userId = localStorage.getItem("userId");    
    if (!userId) {
        alert("Utilisateur non connecté");
        return window.location.href = "/login";
    }

    console.log(`ID utilisateur récupéré : ${userId}`);

    // Récupération des données utilisateur
    fetch(`http://localhost:3001/profil/${userId}`)
        .then(response => {
            if (!response.ok) throw new Error('Erreur réseau');
            return response.json();
        })
        .then(result => {
            console.log("Données reçues:", result);
            
            // Peuplement des champs
            document.getElementById("nom").value = result.nom || "";
            document.getElementById("prenom").value = result.prenom || "";
            document.getElementById("email").value = result.email || "";
            document.getElementById("domaine").value = result.domaine || "";
            document.getElementById("gouvernorat").value = result.gouvernorat || "";
            document.getElementById("telephone").value = result.telephone || "";
        })
        .catch(error => {
            console.error("Erreur:", error);
            alert("Erreur lors du chargement des données.");
        });

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    // Récupération des valeurs du formulaire
    const formData = {
      prenom: document.getElementById("prenom").value,
      nom: document.getElementById("nom").value,
      email: document.getElementById("email").value,
      telephone: document.getElementById("telephone").value,
      domaine: document.getElementById("domaine").value,
      experience: document.getElementById("experience").value,
      diplome: document.getElementById("diplome").value,
      gouvernorat: document.getElementById("gouvernorat").value,
      bio: document.getElementById("bio").value,
       skills: Alpine.store("skills"), 
        langues: Array.from(document.querySelectorAll("input[name='languages']:checked")).map(l => l.value)
    };

    // Remplacer userId par l'ID de l'utilisateur actuel
    const userId = 123; // Remplacer avec l'ID réel

    try {
      const response = await fetch(`/profil/${userId}`, { 
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData)
      });

      const result = await response.json();
      
      if (!response.ok) throw new Error(result.error);
      
      alert(result.message);
      window.location.reload();
      
    } catch (error) {
      alert("Erreur : " + error.message);
    }
  });
});



 function generateCV() {
  const formData = {
    prenom: document.getElementById('prenom').value,
    nom: document.getElementById('nom').value,
    email: document.getElementById('email').value,
    telephone: document.getElementById('telephone').value,
    gouvernorat: document.getElementById('gouvernorat').value,
    experience: document.getElementById('experience').value,
    skills: Array.from(document.querySelectorAll(".skills-list span")).map(s => s.innerText.trim()).filter(s => s !== ""),
    langues: Array.from(document.querySelectorAll('input[name="languages"]:checked'))
              .map(l => l.value)
  };

  fetch('/api/generate-cv', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json', // Changement important
    },
    body: JSON.stringify(formData) // Envoi en JSON
  })
  .then(response => {
    if (!response.ok) {
      return response.json().then(err => { throw new Error(err.error); });
    }
    return response.blob();
  })
  .then(blob => {
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `CV_${formData.prenom}_${formData.nom}.pdf`;
    a.click();
    window.URL.revokeObjectURL(url);
  })
  .catch(error => {
    console.error('Erreur:', error);
    alert(`Erreur: ${error.message}`);
  });
}


    </script>
    <script>
document.addEventListener("DOMContentLoaded", () => {
  const improveBioBtn = document.getElementById('improveBioBtn');
  const bioTextarea = document.getElementById('bio');

  async function improveBio() {
    const userDescription = bioTextarea.value.trim();
    
    if (!userDescription) {
      alert('Veuillez écrire quelque chose avant de corriger !');
      return;
    }

    try {
      improveBioBtn.disabled = true;
      improveBioBtn.textContent = 'Correction en cours...';

      const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
        method: "POST",
        headers: {
          "Authorization": "Bearer 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",
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          "model": "google/gemini-2.0-flash-lite-001",
          "messages": [{
            "role": "user",
            "content": [{
              "type": "text",
              "text": `Corrige cette phrase en français (réponds uniquement avec la phrase corrigée sans commentaires) : ${userDescription}`
            }]
          }]
        })
      });

      const data = await response.json();
      const correctedText = data.choices[0].message.content;
      
      bioTextarea.value = correctedText;
      bioTextarea.focus();

    } catch (error) {
      console.error('Erreur:', error);
      alert('Une erreur est survenue lors de la correction');
    } finally {
      improveBioBtn.disabled = false;
      improveBioBtn.textContent = 'Envoyer';
    }
  }

  improveBioBtn.addEventListener('click', improveBio);
});
</script>
  <!-- Footer -->
  <footer class="bg-blue-50/80 border-t border-blue-100 py-16 relative z-10">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-10">
        <div class="col-span-1 md:col-span-2">
          <a href="/" class="inline-block mb-4">
            <span class="text-2xl font-medium tracking-tight">VipJob<span class="text-blue-600">.tn</span></span>
          </a>
          <p class="text-muted-foreground mb-6 max-w-md">
            VipJob.tn est une plateforme d'offres d'emploi qui aide les chercheurs d'emploi à trouver des opportunités adaptées à leur profil de manière simple et rapide.
          </p>
          <div class="flex items-center gap-4">
            <a href="#" class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 hover:bg-blue-200 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
            </a>
            <a href="#" class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 hover:bg-blue-200 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"/></svg>
            </a>
            <a href="#" class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 hover:bg-blue-200 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
            </a>
            <a href="#" class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 hover:bg-blue-200 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
            </a>
          </div>
        </div>
        
        <div>
          <h3 class="font-medium text-lg mb-4">Liens Rapides</h3>
          <ul class="space-y-3">
            <li><a href="/" class="text-muted-foreground hover:text-blue-600 transition-colors">Accueil</a></li>
            <li><a href="/profile" class="text-muted-foreground hover:text-blue-600 transition-colors">Profil</a></li>
            <li><a href="/jobs" class="text-muted-foreground hover:text-blue-600 transition-colors">Recherche d'emploi</a></li>
            <li><a href="#" class="text-muted-foreground hover:text-blue-600 transition-colors">Entreprises</a></li>
            <li><a href="#" class="text-muted-foreground hover:text-blue-600 transition-colors">Blog</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="font-medium text-lg mb-4">Contact</h3>
          <ul class="space-y-4">
            <li class="flex items-start gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600 mt-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
              <span class="text-muted-foreground">Rue de la Bourse, Les Berges du Lac, Tunis</span>
            </li>
            <li class="flex items-center gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
              <a href="mailto:contact@vipjob.tn" class="text-muted-foreground hover:text-blue-600 transition-colors">contact@vipjob.tn</a>
            </li>
            <li class="flex items-center gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></svg>
              <a href="tel:+21671000000" class="text-muted-foreground hover:text-blue-600 transition-colors">+216 71 000 000</a>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-blue-100 mt-12 pt-6 flex flex-col md:flex-row justify-between items-center gap-4">
        <p class="text-muted-foreground text-sm">
          © 2023 VipJob.tn. Tous droits réservés.
        </p>
        <div class="flex gap-6">
          <a href="#" class="text-sm text-muted-foreground hover:text-blue-600 transition-colors">Conditions d'utilisation</a>
          <a href="#" class="text-sm text-muted-foreground hover:text-blue-600 transition-colors">Politique de confidentialité</a>
        </div>
      </div>
    </div>
  </footer>
</body>
</html>
